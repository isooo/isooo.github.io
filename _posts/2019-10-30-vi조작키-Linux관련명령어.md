---
layout: post
title:  "[OS] 간단한 vi 조작키 및 Linux 관련 명령어"
date: 2019-10-30
categories: [ETC]
tags: [linux,terminal,vi]
---

# vi

<br/>

### `x` (소문자)
- 현재 커서가 위치한 글자 삭제 ( == Del)

<br/>

### `X` (대문자)
- 현재 커서 위치의 앞글자 삭제 ( == Backspace)

<br/>

### `dd`
- 현재 커서의 행 삭제
- `dd` 앞에 숫자입력했을 때, 숫자만큼의 행 삭제

<br/>

### `yy`
- 현재 커서가 있는 행 복사
- `yy` 앞에 숫자 입력했을 때, 숫자만큼 행 복사

<br/>

### `p` (소문자)
- 복사한 내용을 현재 행 이후에 붙여넣기

<br/>

### `P` (대문자)
- 복사한 내용을 현재 행 이전에 붙여넣기

<br/>

### `ctrl`+ `f`
- 다음페이지

<br/>

### `ctrl`+ `b`
- 이전페이지

<br/>

### `/` + `키워드`
- 키워드 찾기
- e.g. `/CATALINA_OUT`
- 계속 다음 찾기를 하려면 슬래쉬하고 엔터

<br/>

### `shift` + `g`
- 페이지 마지막으로 가기



<br/><br/>

---

<br/><br/>



# Linux

<br/>

### 종료
```bash
$ shutdown –P now

$ halt –p

$ init 0
```

<br/>

### 재시작
```bash
$ shutdown -r now

$ reboot

$ init 6
```

<br/>

### 특정 폴더 이하 파일 개수 세기
```bash
$ find /폴더/경로 -type f | wc -l

$ find . -type f | wc -l
```

<br/>

### grep
```bash
$ grep [options] [pattern] file
```

- 텍스트 검색
- `[options]`
    - `-c` : 패턴이 일치하는 행의 수를 출력
    - `i` : 비교시 대소문자 구별을 안함
    - `-v` : 지정한 패턴과 일치하지 않는 행만 출력
    - `-n` : 행의 번호와 함께 출력
    - `-l` : 패턴이 포함된 파일의 이름을 출력
    - `-w` : 패턴이 전체 단어와 일치하는 행만 출력

<br/>

### head/tail
```bash
$ head/tail [-라인 수] filename
```

- 텍스트파일의 앞/뒤의 일부분만 출력해보기위해 주로 사용하는 명령어
- 라인 수를 옵션으로 주지 않으면 기본적으로 10줄씩 출력한다.

```
$ tail -f aaa.log
```

- `-f` 옵션을 주면 실시간으로 계속해서 출력하여 보여준다.

<br/>

### chown
```bash
$ chown[-R][user][:group] target1 [target2...]
```

- 파일의 소유권을 바꾸기 위해 사용
- `[options]`
    - `-R` : 명명되는 모든 target디렉토리와 그 안에 들어있는 파일들에 대해 재귀적인 변화를 지정
    - 선택적인 `user`변수 : target들의 소유권을 가질 수 있는 사용자를 표시한다.
    - 선택적인 `group` 변수 : target들이 관련되어있는 그룹을 표시한다.
    - `target`변수 : 사용자나 그룹들이 바뀔 수 있는 파일이나 디렉토리들을 표시한다.

```bash 
$ chown -R isoo aaa.dir
```

- `aaa.dir` 하위 모든 파일 및 폴더의 소유자를 `isoo`로 지정

<br/>

### chmod
```bash
$ chmod [options] mode[,mode] file1 [file2...]
```

- 파일이나 디렉토리의 파일시스템 모드를 바꾼다. 
    - 모드는 허가나 특별한 모드들을 포함
- `[options]`
    - `-R` : 재귀적으로 파일과 디렉토리들의 모드들을 바꾼다.
    - `-v` : 실행되고 있는 모든 파일을 나열한다.(verbose)

```
$ chmod 755 *.sh
```

- 현재 폴더 내 `sh`확장자를 가진 모든 파일을 755로 바꿈

<br/>

### netstat
```bash
$ netstat [options]
```

- network status. 
- 네트워크 접속, 라우팅 테이블, 네트워크 인터페이스의 통계 정보를 보여주는 도구
- `[options]`
    - `-a` (all) : 모든 소켓 보기, 이 옵션이 없으면 Established 상태만 출력된다.
    - `-c` (continuous) : 실행명령을 매 초마다 실행
    - `-e` (extend) : 확장 정보 추가, User부분과 Inode열이 추가된다.
    - `-l` (listening) : Listening상태인 소켓 리스트만 보여준다.
    - `-n` (numeric) : 도메인 주소를 읽지않고 숫자로 출력
    - `-p` (program) : PID와 사용중인 프로그램명이 출력
    - `-r` (route) : 라우팅 테이블 보기
    - `-t` (tcp)
    - `-u` (udp)

```bash
$ netstat -tnlp
```

<br/>

### tracert / traceroute
-  tracert – Windows기반 운영체제의 네트워크 경로추적 명령어
-  traceroute - Linux기반 운영체제의 네트워크 경로추적 명령어

```bash
$ traceroute 서버주소
```

- 네트워크를 통해 목적지에 도달하는 경로를 수집
- centOS7 최초 설치시, traceroute는 없으므로 설치해줘야 함

```bash
// 설치방법
$ yum install traceroute
```

<br/>

### ln
```bash
$ ln [options] source link # 하드링크 생성

$ ln -s [options] source link # 심볼릭링크 생성
```

- Link의 약어로서 리눅스 파일시스템에서 링크파일을 만드는 명령어이다.    
   - 리눅스에는 심볼릭링크와 하드링크 두가지 링크 파일이 존재
        - 심볼릭 링크 : 단순히 원본파일을 가리키도록 링크만 생성해둔 것으로, `윈도우 > 바로가기`를 연상하면 된다.
        - 하드 링크 : 원본파일과 다른 이름으로 존재하는 동일한 내용의 다른 파일. 원본과 링크 둘 중 하나를 삭제하더라도 다른 하나는 남아있으며, 원본의 내용이 변경될 경우 링크파일의 내용 또한 자동으로 변경된다.  
- `[options]`
    - `-f` : 대상파일이 이미 존재할 경우 지우고 새 링크파일 생성
    - `-i` : 대상파일이 이미 존재할 경우 지울것인지 물어봄
    - `-b` : 대상파일이 이미 존재할 경우 백업파일을 만든 후에 링크파일을 생성

```bash
$ ln -s jdk1.8.0_181 java
```

- java라는 심볼릭링크 생성

<br/>

### du
``` bash
$ du [options] file
```

- disk usage의 줄임말로, 현재 디렉토리(에서 서브 디렉토리까지)의 사용량을 보여주는 명령어
- `[options]`
    - `-a` : 모든 파일들의 기본정보를 보여준다.
    - `-b` : 표시단위를 Byte로 한다.
    - `-k` : 표시단위를 Kb로 한다.
    - `-h` : 보기 좋게 표시한다. (human readable)
    - `-c` : 모든 파일의 정보를 보여주고나서 최종 합계를 표시한다.
    - `-s` : 총사용량만 표시한다.
    - `-sh *` : 한단계 서브디렉토리 기준으로 보여준다.

<br/>

### df
```bash
$ dk [options] file
```

- disk free의 줄임말로, 파일시스템의 가용량과 디스크 사용량을 확인할 수 있다
- `[options]`
    - `-h` (human readable) : 옵션을 붙여주면 적절한 단위가 붙어 알아보기 쉽게 출력된다.
    - `-k` : 킬로바이트 단위로 현재 남은 용량 확인
    - `-m` : 메가바이트 단위로 남은 용량 확인

<br/>

### ifconfig
- 리눅스 네트워크 인터페이스 설정 확인/관리
- IP 주소, 맥주소,  넷마스크, MTU 설정 등 확인 가능
- `[options]`
    - `-a` : 모든 네트워크 정보를 볼 수 있음
    - `up` : 지정한 인터페이스를 활성화
    - `down` : 지정한 인터페이스 비활성화
    - `netmask addr` : 넷마스크 설정
    - `address` : 인터페이스에 IP주소를 설정

<br/>

### nslookup
-  name server lookup. 네임 서버 관련된 조회를 할 수 있는 명령어

```bash
$ nslookup google.com # 구글의 ip확인

$ nslookup -query=mx google.com # 구글의 MX확인

$ nslookup -type=ns google.com # NS레코드로 DNS목록 확인

$ nslookup 209.132.183.181 # Reverse DNS lookup
```

<br/>

### cp
```bash
$ cp [options] [원본] [사본]
```

- 파일을 **복사**하는 명령어
- `[options]`
    - `-a` : 원본 파일의 속성, 링크 정보들을 그대로 유지하면서 복사한다.
    - `-b` : 복사할 대상이 이미 있을 경우 기존 파일을 백업하고 복사한다.
    - `-d` : 만약 복사할 원본이 심볼릭 링크일 때 심볼릭 자체를 복사한다.
    - `-f` : 만약 복사할 대상이 이미 있으면 강제로 지우고 복사한다.
    - `-i` : 만약 복사할 대상이 이미 있으면 사용자에게 물어본다.
    - `-l` : 하드링크 형식으로 복사한다.
    - `-P` (대문자 P) : 원본 파일 지정을 경로와 같이했을 경우 그 경로 그대로 복사된다.
    - `-p` (소문자 p) : 파일의 소유자, 그룹, 권한, 시간 정보들이 그대로 보존되어 복사된다.
    - `-r` : 원본이 파일이면 그냥 복사되고, 디렉터리라면 디렉터리 전체가 복사된다.
    - `-s` : 파일을 심볼릭 링크 형식으로 복사한다. 원본 파일이름을 절대 경로로 지정해야 한다.
    - `-u` : 복사할 대상이 있을 때 이 파일의 변경 날짜가 같거나 더 최근의 것이면 복사하지 않는다.
    - `-v` : 복사 상태를 보여준다.
    - `-x` : 원본과 대상 파일의 파일시스템이 다를 경우에는 복사하지 않는다.
    - `-R` : 디렉터리를 복사할 경우 그 안에 포함된 모든 하위경로와 파일들을 모두 복사한다.

<br/>

### mv
```bash
$ mv [options] [원본] [이동경로]
```
- 파일을 **이동**하는 명령어
- `cp`는 파일을 복사하는 것이고 `mv`는 파일 이동인데, `mv`는 이동 시 원본 파일이 삭제된다는게 차이점이다.
    > 파일이름을 변경할 때도 `mv` 를 쓰면 편리함
- `[options]`
    - `-b` : 이동 경로에 같은 이름의 파일이나 디렉터리가 존재하면 기존 파일을 백업한 뒤에 이동한다.
    - `-f` : 이동 경로에 같은 이름의 파일이나 디렉터리가 존재하면 덮어쓸 때 묻지 않고 바로 덮어쓴다.
    - `-i` : 이동 경로에 같은 이름의 파일이나 디렉터리가 존재하면 덮어쓸 때 물어본다.
    - `-v` : 이동 상태를 표시한다.

<br/>

### tar
```bash
$ tar -cvf [파일명.tar] [폴더명] # 폴더를 압축

$ tar -xvf [파일명.tar] # 압축 해제

$ tar -zcvf [파일명.tar.gz] [폴더명] # gz로 압축

$ tar -zxcf [파일명.tar.gz] # tar.gz 압축 해제

$ tar -rvf [압축파일명.tar] [새파일] # 기존 압축에 새 파일 추가

$ tar -tvf [압축파일명.tar] # 내용 확인
```

- 리눅스 파일시스템을 아카이빙하고 압축하는 명령어

<br/>

### uname
```bash
$ uname [options]
```

- 시스템 정보 출력
- [options]
    - `-a`: 아래의 모든 옵션에 대한 정보를 출력
    - `-m` : 시스템의 하드웨어타입정보 출력
    - `-n` : 네트웍노드 호스트이름에 대한 정보 출력
    - `-p` : 프로세스 정보를 출력
    - `-r` : 운영체제의 배포버전을 출력
    - `-s` : 커널이름을 출력
    - `-v` : 커널 버전정보를 출력


<br/><br/>

---

<br/>

## 참고
- [ThroughKim : Linux 공부 14 - 개념 정리](http://throughkim.kr/2017/01/09/linux-14)